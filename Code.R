## Loading Library ##
library(gurobi)

#normal distribution, mean of 155 and sd = 45 to generate daily paitients over a week
patients <-rnorm(7,155,45)

#Shifts in a day
Svec <- list(s1 = (0:8), 
            s2 = (6:14), 
            s3 = (12:20), 
            s4 = (16:24))
#Number of days 
Tvec <- 1:7
#number of periods in a day
Ivec <- list(i1 = (0:4), 
             i2 = (4:8), 
             i3 = (8:12), 
             i4 = (12:16), 
             i5 = (16:20), 
             i6 = (20:24))
#type of doctor
Dvec <- 1:3

#Cost matrix -- each type of doctor per shift 
Pmat<-matrix(c(120,347,283,
               80,231,189,
               80,231,189,
               80,231,189), nrow=length(Dvec), ncol = length(Svec))

#demand per each period i in a day T
Nmat<-matrix(0, nrow = length(Tvec), ncol = length(Ivec))

generate_random_demand <- function(patients,Nmat) {
  for (i in 1:length(patients)) {
    random_numbers <- runif(6)
    normalized_numbers <- random_numbers / sum(random_numbers)
    scaled_numbers <- normalized_numbers * patients[i]
    Nmat[i,]<-round(scaled_numbers,0)
  }
  return(Nmat)
}

Nmat<-generate_random_demand(patients,Nmat)
colnames(Nmat)<-c("i1","i2","i3","i4","i5","i6")

#matrix to determine if shift s covers period i
Amat<-matrix(0, nrow=length(Svec), ncol = length(Ivec))
colnames(Amat)<-c("i1","i2","i3","i4","i5","i6")

#filling up Amat
for (i in 1:length(Ivec)){
  for (s in 1:length(Svec)){ 
    binary <- sum(unlist(Ivec[i]) %in% unlist(Svec[s]))
    if (as.numeric(binary) == 5){ 
      Amat[s, i] <- 1
      }
    else if (as.numeric(binary) == 3){ 
      Amat[s, i] <- 0.5
      }
    else{ 
      Amat[s, i] <- 0}
  }
}

#### GUROBI MODEL ####

t1_s1<-c(1,0,0,0,1,0,0,0,1,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t1_s2 <-c(0,1,0,0,0,1,0,0,0,1,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0)

t1_s3<-c(0,0,1,0,0,0,1,0,0,0,1,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t1_s4<-c(0,0,0,1,0,0,0,1,0,0,0,1,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t2_s1<-c(1,0,0,0,1,0,0,0,1,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t2_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,1,0,0,0,1,0,0,0,1,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t2_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,1,0,0,0,1,0,0,0,1,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t2_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,1,0,0,0,1,0,0,0,1,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t3_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         1,0,0,0,1,0,0,0,1,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t3_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,1,0,0,0,1,0,0,0,1,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t3_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,1,0,0,0,1,0,0,0,1,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t3_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,1,0,0,0,1,0,0,0,1,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t4_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         1,0,0,0,1,0,0,0,1,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t4_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,1,0,0,0,1,0,0,0,1,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t4_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,1,0,0,0,1,0,0,0,1,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t4_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,1,0,0,0,1,0,0,0,1,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t5_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         1,0,0,0,1,0,0,0,1,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t5_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,1,0,0,0,1,0,0,0,1,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t5_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,1,0,0,0,1,0,0,0,1,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t5_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,1,0,0,0,1,0,0,0,1,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t6_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         1,0,0,0,1,0,0,0,1,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t6_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,1,0,0,0,1,0,0,0,1,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t6_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,1,0,0,0,1,0,0,0,1,0,
         0,0,0,0,0,0,0,0,0,0,0,0)

t6_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,1,0,0,0,1,0,0,0,1,
         0,0,0,0,0,0,0,0,0,0,0,0)

t7_s1<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         1,0,0,0,1,0,0,0,1,0,0,0)

t7_s2<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,1,0,0,0,1,0,0,0,1,0,0)

t7_s3<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,1,0,0,0,1,0,0,0,1,0)

t7_s4<-c(0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,0,0,0,0,0,0,0,0,0,
         0,0,0,1,0,0,0,1,0,0,0,1)

demand<- matrix(0, nrow=length(Tvec), ncol = length(Svec))
colnames(demand)<-c('s1' , 's2', 's3', 's4')

for(t in 1:length(Tvec)){
  for(i in 1:length(Ivec)){
    for(s in 1:length(Svec)){
      demand[t,s]<- demand[t,s] + Nmat[t,i]*Amat[s,i]
    }
  }
} 

model<-list()
model$A<-rbind(
  constraint_demand1,
  constraint_demand2,
  constraint_demand3,
  constraint_demand4,
  constraint_demand5,
  constraint_demand6,
  constraint_demand7
)
